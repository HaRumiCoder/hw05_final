{% extends 'base.html' %}
{% block title %}
  Последние обновления на сайте
{% endblock %}
{% block content %}
  {% with request.resolver_match.view_name as view_name %}  
    {% include 'posts/includes/switcher.html' %}
    {% load cache %}
    {% load thumbnail %}
    <div class="container py-5">
      <h1>Последние обновления на сайте</h1>
      <article>
        {% cache 20 index_page %}
          {% for post in page_obj %}
            {% include 'posts/includes/post_list.html' %}
            {% if not forloop.last %}<hr>{% endif %}
          {% endfor %}
        {% endcache %}
      </article>
      {% include 'posts/includes/paginator.html' %}
    </div>
  {% endwith %}
{% endblock %}